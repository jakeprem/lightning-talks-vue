webpackJsonp([1],{"0Gbx":function(t,e){},"7A9I":function(t,e){},N3bS:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/5sW"),s=n("Dd8w"),a=n.n(s),r=n("NYxO"),c=n("ewS8"),o=n.n(c);function u(t,e){return o()(t).format(e)}var l=function(t){return u(t,"MMMM DD, YYYY")},v=function(t){return u(t,"MMMM Do YYYY, h:mm a")},d={data:function(){return{isMenuOpen:!1,links:[{text:"Home",name:"IndexPage",exact:!0},{text:"Admin",name:"ListTalksPage",exact:!0}]}},methods:a()({},Object(r.b)(["setActiveEvent"]),{toggle:function(t){return this.isMenuOpen?this.hide(t):this.show(t)},show:function(t){var e=this;this.isMenuOpen=!0,setTimeout(function(){return document.addEventListener("click",e.hide)},0)},hide:function(t){this.isMenuOpen=!1,document.removeEventListener("click",this.hide)},logout:function(){var t=this;this.$firebase.app.auth().signOut().then(function(){t.$router.push({name:"IndexPage"})})}}),computed:a()({},Object(r.c)(["activeEvent","username","isValidUser"]),{eventDate:function(){return v(this.activeEvent.start_datetime)}})},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero is-info"},[n("div",{staticClass:"hero-head"},[n("nav",{staticClass:"navbar"},[n("div",{staticClass:"container"},[n("div",{staticClass:"navbar-brand"},[t._m(0),t._v(" "),n("span",{staticClass:"navbar-burger burger",class:{"is-active":t.isMenuOpen},on:{click:t.toggle}},[n("span"),t._v(" "),n("span"),t._v(" "),n("span")])]),t._v(" "),n("div",{staticClass:"navbar-menu",class:{"is-active":t.isMenuOpen}},[n("div",{staticClass:"navbar-end"},[t._l(t.links,function(e){return n("router-link",{key:e.name,staticClass:"navbar-item",attrs:{to:{name:e.name},"active-class":"is-active",exact:e.exact}},[t._v("\n              Â  "+t._s(e.text||e.name)+"\n            ")])}),t._v(" "),t.isValidUser?n("span",{staticClass:"navbar-item",on:{click:t.logout}},[n("div",{staticClass:"button is-info is-inverted"},[t._m(1),t._v(" "),n("span",[t._v("Logout, "+t._s(t.username))])])]):n("span",{staticClass:"navbar-item"},[n("router-link",{staticClass:"button is-info is-inverted",attrs:{to:{name:"LoginPage"}}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-sign-in-alt"})]),t._v(" "),n("span",[t._v("Login")])])],1)],2)])])])]),t._v(" "),n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container has-text-centered"},[n("h1",{staticClass:"title"},[t._v("\n        Lightning Talks\n      ")]),t._v(" "),n("h2",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.eventDate)+"\n      ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-item"},[e("img",{attrs:{src:"/static/icon-128.png",alt:"Logo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-sign-out-alt"})])}]};var f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"container"},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("strong",[t._v("Lightning Talk App")]),t._v(" by "),n("a",{attrs:{href:"http://jakeprem.com"}},[t._v("Jake Prem")]),t._v(". The source code is licensed\n        "),n("a",{attrs:{href:"http://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v(".\n      ")]),t._v(" "),n("p",[n("a",{staticClass:"icon",attrs:{href:"https://github.com/jakeprem/lightning-talks-vue"}},[n("i",{staticClass:"fab fa-github"})])]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",[t._v("REMOVE THIS ONCE THE ICON IS REPLACED")]),t._v(" "),n("div",[t._v("Icons made by "),n("a",{attrs:{href:"http://www.freepik.com",title:"Freepik"}},[t._v("Freepik")]),t._v(" from "),n("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[t._v("www.flaticon.com")]),t._v(" is licensed by "),n("a",{attrs:{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"}},[t._v("CC 3.0 BY")])]),t._v(" "),n("div",[t._v("REMOVE THIS ONCE THE ICON IS REPLACED")])])])])}]};var m={name:"App",components:{AppNavbar:n("VU/8")(d,h,!1,function(t){n("lkHI")},null,null).exports,AppFooter:n("VU/8")({},f,!1,function(t){n("N3bS")},null,null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-navbar"),this._v(" "),e("router-view"),this._v(" "),e("app-footer")],1)},staticRenderFns:[]};var _=n("VU/8")(m,p,!1,function(t){n("gYbP")},null,null).exports,b=n("/ocq"),g={name:"SubmitPage",data:function(){return{inputTitle:"",inputAbstract:"",inputOutline:""}},methods:a()({},Object(r.b)(["submitTalkForEvent"]),{resetInputs:function(){this.inputTitle="",this.inputAbstract="",this.inputOutline=""},submitTalk:function(){var t=this;this.submitTalkForEvent({title:this.inputTitle,abstract:this.inputAbstract,outline_link:this.inputOutline}).then(function(e){console.log(e),t.resetInputs()})}}),computed:a()({},Object(r.c)(["activeEvent"]),{submissionDeadline:function(){return l(this.activeEvent.submissionDeadline)}})},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[t._v("Submit a Lightning Talk")]),t._v(" "),n("h2",{staticClass:"subtitle is-size-6 has-text-grey-light"},[t._v("Deadline: "+t._s(t.submissionDeadline))]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Title")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputTitle,expression:"inputTitle"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter your title here"},domProps:{value:t.inputTitle},on:{input:function(e){e.target.composing||(t.inputTitle=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Abstract")]),t._v(" "),n("div",{staticClass:"control"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputAbstract,expression:"inputAbstract"}],staticClass:"textarea",attrs:{placeholder:"Enter your abstract here"},domProps:{value:t.inputAbstract},on:{input:function(e){e.target.composing||(t.inputAbstract=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Outline/Slides")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOutline,expression:"inputOutline"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter a link here"},domProps:{value:t.inputOutline},on:{input:function(e){e.target.composing||(t.inputOutline=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",on:{click:t.submitTalk}},[t._v("Submit")])]),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-text",on:{click:t.resetInputs}},[t._v("Cancel")])])])])])},staticRenderFns:[]};var E=n("VU/8")(g,C,!1,function(t){n("Pnwa")},null,null).exports,k={computed:a()({},Object(r.c)(["activeEvent","eventTalks"])),created:function(){this.$store.dispatch("fetchEventTalks",this.activeEvent[".key"])}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("br"),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"}),t._v(" "),n("div",{staticClass:"column is-four-fifths"},[t._l(t.eventTalks,function(e){return[n("div",{key:e.submitterName+":"+e.title,staticClass:"card"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title"},[t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("\n              "+t._s(e.submitterName)+"\n            ")]),t._v(" "),n("p",{staticClass:"content"},[t._v("\n              "+t._s(e.abstract)+"\n            ")])]),t._v(" "),n("footer",{staticClass:"card-footer"},[n("p",{staticClass:"card-footer-item"},[n("a",{attrs:{href:e.outline}},[t._v(t._s(e.outline_link))])])])])]})],2),t._v(" "),n("div",{staticClass:"column"})])])},staticRenderFns:[]};var w=n("VU/8")(k,T,!1,function(t){n("7A9I")},null,null).exports,I={data:function(){return{eventState:{beforeSubmitDeadline:!0,beforeEvent:!0,duringEvent:!1,votingEnabled:!1},userState:{hasSubmitted:!1,talkAccepted:!1}}},computed:a()({},Object(r.c)(["activeEventState"]),{activeComponent:function(){switch(this.activeEventState){case"BeforeSubmissionDeadline":return E;case"BeforeEventStart":return w;case"AfterEventStart":return"FeedbackPage"}}}),components:{ListTalksPage:w}},S={render:function(){var t=this.$createElement;return(this._self._c||t)(this.activeComponent,{tag:"div"})},staticRenderFns:[]};var A=n("VU/8")(I,S,!1,function(t){n("xmK9")},null,null).exports,x={data:function(){return{}},methods:a()({},Object(r.b)(["setUser"]),{login:function(){this.setUser(this.username),this.resetInputs()},resetInputs:function(){this.username="",this.password=""}}),created:function(){this.$firebase.ui.isPendingRedirect()||this.$firebase.ui.reset(),this.$firebase.ui.start("#firebase-auth-container",this.$firebase.uiConfig)}},O={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"section"},[e("div",{staticClass:"container has-text-centered"},[e("h1",{staticClass:"title"},[this._v("Login")]),this._v(" "),e("h2",{staticClass:"subtitle"},[this._v("Please login to continue")]),this._v(" "),e("div",{attrs:{id:"firebase-auth-container"}})])])}]};var y=n("VU/8")(x,O,!1,function(t){n("0Gbx")},null,null).exports;i.a.use(b.a);var P=new b.a({routes:[{path:"/",name:"IndexPage",component:A},{path:"/login",name:"LoginPage",component:y},{path:"/talks/new",name:"SubmitPage",component:E},{path:"/talks",name:"ListTalksPage",component:w}]}),N=n("bOdI"),D=n.n(N),U=n("mvHQ"),$=n.n(U),F=n("//Fk"),M=n.n(F),V=n("Zrlr"),L=n.n(V),R=n("wxAW"),H=n.n(R),Y=function(){function t(e){L()(this,t),this.__contract__=[],this.__contract__=e}return H()(t,[{key:"_validate",value:function(t){var e=!1;return this.__contract__ instanceof Array&&(e=this.__contract__.every(function(e){return t.hasOwnProperty(e)&&void 0!==t[e]})),e}},{key:"validate",value:function(t){var e=this;return new M.a(function(n,i){e._validate(t)&&n(t),i(new Error("There are invalid fields on the model: "+$()(t)))})}},{key:"default",value:function(){if(this.__contract__ instanceof Array){var t={};return this.__contract__.forEach(function(e){e.includes("datetime")?t[e]=new Date:t[e]=""}),t}}}]),t}(),j=new Y(["active","start_datetime","end_datetime","submission_deadline","number_of_talks","talk_length","voting_enabled"]),B=new Y(["displayName","uid"]),K=n("Sazm"),z=n.n(K),W=(n("3VHS"),n("2ahc")),G={signInSuccessUrl:"",signInOptions:[z.a.auth.EmailAuthProvider.PROVIDER_ID,z.a.auth.GoogleAuthProvider.PROVIDER_ID],credentialHelper:W.auth.CredentialHelper.NONE,tosUrl:"/tos",callbacks:{signInSuccess:function(t,e,n){console.log("cb_user",t),console.log("cb_credential",e),console.log("cb_redirect",n)}}},q=z.a.initializeApp({apiKey:"AIzaSyCXE_-TbMSFjqoVtU5lltHSTLSIwQpWab0",authDomain:"lightning-talks-vue.firebaseapp.com",databaseURL:"https://lightning-talks-vue.firebaseio.com",projectId:"lightning-talks-vue",storageBucket:"lightning-talks-vue.appspot.com",messagingSenderId:"1039983970304"}),J=q.firestore(),Q=new W.auth.AuthUI(q.auth()),X=G,Z=J;function tt(t){var e=[];return t.forEach(function(t){e.push(a()({".key":t.id},t.data()))}),e}function et(t){console.log(t)}var nt,it={getActiveEvent:function(){return Z.collection("events").where("active","==",!0).get().then(function(t){var e=[];return t.forEach(function(t){e.push(a()({".key":t.id},t.data()))}),e[0]}).catch(function(t){return console.log(t)})},getEventTalks:function(t){return Z.collection("talks").where("eventId","==",t).where("selected","==",!0).get().then(tt).catch(et)},getUserTalks:function(t){return Z.collection("talks").where("submitterId","==",t).where("selected","==",!0).get().then(tt).catch(et)},submitTalkForEvent:function(t){return Z.collection("talks").add(t).then(function(e){return console.log("submit",e),t})}},st=new Y(["title","abstract","outline_link","eventId","selected","submitterId","submitterName"]);i.a.use(r.a);var at="SET_ACTIVE_EVENT",rt="SET_EVENT_TALKS",ct="SET_USER",ot={activeEvent:j.default(),eventTalks:[],user:""},ut={activeEvent:function(t){return t.activeEvent},activeEventState:function(t){var e=new Date,n=t.activeEvent;switch(!0){case e<n.submission_deadline:return"BeforeSubmissionDeadline";case e<n.start_datetime:return"BeforeEventStart";case e<n.end_datetime:return"FeedbackEnabled"}},eventTalks:function(t){return t.eventTalks},user:function(t){return t.user},username:function(t){return t.user.displayName},userId:function(t){return t.user.uid},isValidUser:function(t){return B._validate(t.user)}},lt={fetchActiveEvent:function(t){var e=t.commit;it.getActiveEvent().then(function(t){e(at,t)}).catch(function(t){return console.log(t)})},fetchEventTalks:function(t,e){var n=t.commit;it.getEventTalks(e).then(function(t){n(rt,t)}).catch(function(t){return console.log(t)})},setActiveEvent:function(t,e){(0,t.commit)(at,e)},setUser:function(t,e){(0,t.commit)(ct,e)},submitTalkForEvent:function(t,e){t.commit;var n=t.state;return e.eventId=n.activeEvent[".key"],e.submitterId=n.user.uid,e.submitterName=n.user.displayName,e.selected=!1,st.validate(e).then(it.submitTalkForEvent).catch(function(t){return console.log(t)})}},vt=(nt={},D()(nt,at,function(t,e){t.activeEvent=e}),D()(nt,rt,function(t,e){t.eventTalks=e}),D()(nt,ct,function(t,e){t.user=e}),nt),dt=new r.a.Store({state:ot,getters:ut,actions:lt,mutations:vt,strict:!1}),ht=n("wmKo"),ft=n.n(ht);i.a.config.productionTip=!1,i.a.use(ft.a),i.a.prototype.$firebase={app:q,db:J,ui:Q,uiConfig:X},Window.VueApp=new i.a({el:"#app",router:P,store:dt,render:function(t){return t(_)},beforeMount:function(){dt.dispatch("fetchActiveEvent")},created:function(){var t=this;q.auth().onAuthStateChanged(function(e){if(e){var n=e.displayName,i=e.uid;t.$store.dispatch("setUser",{displayName:n,uid:i}),t.$router.push({name:"IndexPage"})}else t.$store.dispatch("setUser","")})}})},Pnwa:function(t,e){},gYbP:function(t,e){},lkHI:function(t,e){},xmK9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b48d7346ab9822181b0b.js.map